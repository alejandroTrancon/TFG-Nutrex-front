"use strict";(self.webpackChunkfront_nutrex=self.webpackChunkfront_nutrex||[]).push([[607],{607:(Oe,O,m)=>{m.r(O),m.d(O,{RouterChildModule:()=>ke});var j=m(9299),t=m(4650);let Q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-home"]],decls:2,vars:0,template:function(e,i){1&e&&(t.TgZ(0,"p"),t._uU(1,"home works!"),t.qZA())}}),o})();var c=m(3626),r=m(4006),d=m(5938);const U_BASE_URL="https://nutrex-back.duckdns.org:7777/api/v1";var v=m(529);const q=U_BASE_URL;let I=(()=>{class o{constructor(e){this.http=e}listIngredientes(){return this.http.get(`${q}/Ingredientes`)}saveIngrediente(e){return this.http.post(`${q}/Ingredientes`,e)}updateIngrediente(e,i){return this.http.put(`${q}/Ingredientes/${i}`,e)}deleteIngrediente(e){return this.http.delete(`${q}/Ingredientes/${e}`)}getIngredienteByName(e){return this.http.get(`${q}/Ingrediente/${e}`)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(v.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=m(4859),C=m(7392),T=m(4144),f=m(9549);let J=(()=>{class o{constructor(e,i,a,l){this.fb=e,this.ingredienteService=i,this.dialogRef=a,this.data=l,this.estadoFormulario="A\xf1adir",this.ingredienteForm=this.fb.group({id:[""],nombre:["",r.kI.required],hidratos:["",r.kI.required],proteinas:["",r.kI.required],grasas:["",r.kI.required],sal:["",r.kI.required],fibra:["",r.kI.required]}),null!=l&&(this.updateForm(l),this.estadoFormulario="Actualizar")}ngOnInit(){}onSave(){let e={id:this.ingredienteForm.get("id")?.value,nombre:this.ingredienteForm.get("nombre")?.value,hidratos:this.ingredienteForm.get("hidratos")?.value,proteinas:this.ingredienteForm.get("proteinas")?.value,grasas:this.ingredienteForm.get("grasas")?.value,sal:this.ingredienteForm.get("sal")?.value,fibra:this.ingredienteForm.get("fibra")?.value};""!=e.id?this.ingredienteService.updateIngrediente(e,this.data.id).subscribe(i=>{this.dialogRef.close(1)},i=>{this.dialogRef.close(2)}):this.ingredienteService.saveIngrediente(e).subscribe(i=>{console.log(i),this.dialogRef.close(1)},i=>{this.dialogRef.close(2)})}onCancel(){this.dialogRef.close(3)}updateForm(e){this.ingredienteForm=this.fb.group({id:[e.id,r.kI.required],nombre:[e.nombre,r.kI.required],hidratos:[e.hidratos,r.kI.required],proteinas:[e.proteinas,r.kI.required],grasas:[e.grasas,r.kI.required],sal:[e.sal,r.kI.required],fibra:[e.fibra,r.kI.required]})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.qu),t.Y36(I),t.Y36(d.so),t.Y36(d.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-ingrediente"]],decls:27,vars:3,consts:[["mat-dialog-title",""],[3,"formGroup"],[1,"container"],["matInput","","formControlName","id","hidden",""],["matInput","","placeholder","Nombre","formControlName","nombre","required",""],["matInput","","type","number","step","0.1","placeholder","Hidratos de carbono","formControlName","hidratos","required",""],["matInput","","type","number","step","0.1","placeholder","Proteinas","formControlName","proteinas","required",""],["matInput","","type","number","step","0.1","placeholder","Grasas","formControlName","grasas","required",""],["matInput","","type","number","step","0.1","placeholder","Sal","formControlName","sal","required",""],["matInput","","type","number","step","0.1","placeholder","Fibra","formControlName","fibra","required",""],["mat-button","","color","primary",3,"disabled","click"],["mat-button","","color","primary",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"form",1)(4,"div",2),t._UZ(5,"input",3),t.TgZ(6,"mat-form-field"),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"mat-form-field"),t._UZ(9,"input",5),t.qZA(),t.TgZ(10,"mat-form-field"),t._UZ(11,"input",6),t.qZA(),t.TgZ(12,"mat-form-field"),t._UZ(13,"input",7),t.qZA(),t.TgZ(14,"mat-form-field"),t._UZ(15,"input",8),t.qZA(),t.TgZ(16,"mat-form-field"),t._UZ(17,"input",9),t.qZA()()()(),t.TgZ(18,"mat-dialog-actions")(19,"button",10),t.NdJ("click",function(){return i.onSave()}),t.TgZ(20,"mat-icon"),t._uU(21,"save"),t.qZA(),t._uU(22," Guardar "),t.qZA(),t.TgZ(23,"button",11),t.NdJ("click",function(){return i.onCancel()}),t.TgZ(24,"mat-icon"),t._uU(25,"cancel"),t.qZA(),t._uU(26," Cancel "),t.qZA()()),2&e&&(t.xp6(1),t.hij("",i.estadoFormulario," ingrediente"),t.xp6(2),t.Q6J("formGroup",i.ingredienteForm),t.xp6(16),t.Q6J("disabled",i.ingredienteForm.invalid))},dependencies:[p.lW,d.uh,d.xY,d.H8,C.Hw,T.Nt,f.KE,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.sg,r.u],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}"]}),o})();const N=U_BASE_URL;let k=(()=>{class o{constructor(e){this.http=e}listUsuarios(){return this.http.get(`${N}/Usuarios`)}saveUsuario(e){return this.http.post(`${N}/Usuarios`,e)}updateIngrediente(e,i){return this.http.put(`${N}/Usuarios/${i}`,e)}getUsuarioByEmail(e){return this.http.get(`${N}/Usuario/email/${e}`)}deleteUsuario(e){return this.http.delete(`${N}/Usuarios/${e}`)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(v.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const D=U_BASE_URL;let y=(()=>{class o{constructor(e){this.http=e}listPlatos(){return this.http.get(`${D}/Platos`)}savePlato(e){return this.http.post(`${D}/Platos`,e)}updatePlato(e,i){return this.http.put(`${D}/Platos/${i}`,e)}deletePlato(e){return this.http.delete(`${D}/Platos/${e}`)}getPlatoByNombre(e){return this.http.get(`${D}/Plato/nombre/${e}`)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(v.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const S=U_BASE_URL;let Y=(()=>{class o{constructor(e){this.http=e}listDietas(){return this.http.get(`${S}/Dietas`)}saveDieta(e){return this.http.post(`${S}/Dietas`,e)}updateDieta(e,i){return this.http.put(`${S}/Dietas/${i}`,e)}deleteDieta(e){return this.http.delete(`${S}/Dietas/${e}`)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(v.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),F=(()=>{class o{constructor(e,i,a,l,s,g){this.dialogRef=e,this.data=i,this.ingredienteService=a,this.usuarioService=l,this.platoService=s,this.dietaService=g}ngOnInit(){}noDelete(){this.dialogRef.close(3)}delete(){switch(this.data.module){case"usuario":null!=this.data?this.usuarioService.deleteUsuario(this.data.id).subscribe(e=>{this.dialogRef.close(1)},e=>{this.dialogRef.close(2)}):this.dialogRef.close(2);break;case"ingrediente":null!=this.data?this.ingredienteService.deleteIngrediente(this.data.id).subscribe(e=>{this.dialogRef.close(1)},e=>{this.dialogRef.close(2)}):this.dialogRef.close(2);break;case"plato":null!=this.data?this.platoService.deletePlato(this.data.id).subscribe(e=>{this.dialogRef.close(1)},e=>{this.dialogRef.close(2),console.log(e)}):this.dialogRef.close(2);break;case"dieta":null!=this.data?this.dietaService.deleteDieta(this.data.id).subscribe(e=>{this.dialogRef.close(1)},e=>{this.dialogRef.close(2),console.log(e)}):this.dialogRef.close(2)}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.so),t.Y36(d.WI),t.Y36(I),t.Y36(k),t.Y36(y),t.Y36(Y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-confirm"]],decls:10,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Confirmaci\xf3n"),t.qZA(),t.TgZ(2,"div",1)(3,"p"),t._uU(4,"Seguro que quieres eliminar el registro?"),t.qZA()(),t.TgZ(5,"div",2)(6,"button",3),t.NdJ("click",function(){return i.noDelete()}),t._uU(7,"No"),t.qZA(),t.TgZ(8,"button",4),t.NdJ("click",function(){return i.delete()}),t._uU(9,"Si"),t.qZA()())},dependencies:[p.lW,d.uh,d.xY,d.H8]}),o})();var b=m(8739),P=m(7009),Z=m(3546),R=m(4850),u=m(1576);function z(o,n){1&o&&(t.TgZ(0,"th",21),t._uU(1,"N\xba"),t.qZA())}function K(o,n){if(1&o&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&o){const e=n.index;t.xp6(1),t.Oqu(e+1)}}function W(o,n){1&o&&(t.TgZ(0,"th",21),t._uU(1,"Nombre"),t.qZA())}function X(o,n){if(1&o&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.nombre)}}function V(o,n){1&o&&(t.TgZ(0,"th",21),t._uU(1,"Hidratos"),t.qZA())}function tt(o,n){if(1&o&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.hidratos)}}function et(o,n){1&o&&(t.TgZ(0,"th",21),t._uU(1,"Proteinas"),t.qZA())}function ot(o,n){if(1&o&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.proteinas)}}function it(o,n){1&o&&(t.TgZ(0,"th",21),t._uU(1,"Grasas"),t.qZA())}function nt(o,n){if(1&o&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.grasas)}}function at(o,n){1&o&&(t.TgZ(0,"th",21),t._uU(1,"Sal"),t.qZA())}function rt(o,n){if(1&o&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.sal)}}function lt(o,n){1&o&&(t.TgZ(0,"th",21),t._uU(1,"Fibra"),t.qZA())}function st(o,n){if(1&o&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.fibra)}}function ct(o,n){1&o&&(t.TgZ(0,"th",21),t._uU(1,"Acciones"),t.qZA())}function dt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",22)(1,"button",23),t.NdJ("click",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.edit(l))}),t.TgZ(2,"mat-icon",24),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",23),t.NdJ("click",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.delete(l.id))}),t.TgZ(5,"mat-icon",25),t._uU(6,"delete"),t.qZA()()()}}function ut(o,n){1&o&&t._UZ(0,"tr",26)}function mt(o,n){1&o&&t._UZ(0,"tr",27)}const pt=function(){return[10,20]};let ft=(()=>{class o{constructor(e,i,a){this.ingredienteService=e,this.dialog=i,this.snackBar=a,this.displayColumns=["n","nombre","hidratos","proteinas","grasas","sal","fibra","acciones"],this.dataSource=new c.by}ngOnInit(){this.listIngredientes()}listIngredientes(){this.ingredienteService.listIngredientes().subscribe(e=>{this.processIngredientesResponse(e)},e=>{console.log("error: ",e)})}processIngredientesResponse(e){const i=[];"00"==e.metadata[0].code&&(e.ingredienteResponse.ingrediente.forEach(l=>{i.push(l)}),this.dataSource=new c.by(i),this.dataSource.paginator=this.paginator)}openIngredienteDialog(){this.dialog.open(J,{width:"500px"}).afterClosed().subscribe(i=>{1==i?(this.openSnackBar("Ingrediente agregado","Success"),this.listIngredientes()):2==i&&this.openSnackBar("Ingrediente no agregado","Error")})}edit(e){this.dialog.open(J,{width:"500px",data:e}).afterClosed().subscribe(a=>{1==a?(this.openSnackBar("Ingrediente actualizado","Success"),this.listIngredientes()):2==a&&this.openSnackBar("Ingrediente no actualizado","Error")})}delete(e){this.dialog.open(F,{data:{id:e,module:"ingrediente"}}).afterClosed().subscribe(a=>{1==a?(this.openSnackBar("Ingrediente eliminado","Success"),this.listIngredientes()):2==a&&this.openSnackBar("Ingrediente no eliminado","Error")})}buscar(e){if(0===e.length)return this.listIngredientes();this.ingredienteService.getIngredienteByName(e).subscribe(i=>{this.processIngredientesResponse(i)})}openSnackBar(e,i){return this.snackBar.open(e,i,{duration:2e3})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(I),t.Y36(d.uw),t.Y36(P.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-ingrediente"]],viewQuery:function(e,i){if(1&e&&t.Gf(b.NW,5),2&e){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first)}},decls:45,vars:5,consts:[[1,"alinear"],["fxFlex","","fxLayout","row","fxLayoutAlign","flex-end"],["appearance","fill"],["matInput","",3,"keyup"],["input",""],["fxLayout","row","fxLayoutGap","20px","type","none"],["mat-raised-button","","color","primary",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","n"],["mat-header-cell","","class","alinear",4,"matHeaderCellDef"],["mat-cell","","class","alinear",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","hidratos"],["matColumnDef","proteinas"],["matColumnDef","grasas"],["matColumnDef","sal"],["matColumnDef","fibra"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","showFirstLastButtons"],["mat-header-cell","",1,"alinear"],["mat-cell","",1,"alinear"],["mat-icon-button","","color","accent",3,"click"],["aria-label","Editar"],["aria-label","Borrar"],["mat-header-row",""],["mat-row",""]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"mat-card")(1,"h2",0),t._uU(2,"Listado de Ingredientes"),t.qZA(),t.TgZ(3,"mat-card-header")(4,"div",1)(5,"mat-form-field",2)(6,"mat-label"),t._uU(7,"Buscar ingrediente"),t.qZA(),t.TgZ(8,"input",3,4),t.NdJ("keyup",function(){t.CHM(a);const s=t.MAs(9);return t.KtG(i.buscar(s.value))}),t.qZA()(),t.TgZ(10,"ul",5)(11,"li")(12,"button",6),t.NdJ("click",function(){return i.openIngredienteDialog()}),t._uU(13,"A\xf1adir Ingrediente"),t.qZA()()()()(),t._UZ(14,"mat-divider"),t.TgZ(15,"mat-card-content")(16,"table",7),t.ynx(17,8),t.YNc(18,z,2,0,"th",9),t.YNc(19,K,2,1,"td",10),t.BQk(),t.ynx(20,11),t.YNc(21,W,2,0,"th",9),t.YNc(22,X,2,1,"td",10),t.BQk(),t.ynx(23,12),t.YNc(24,V,2,0,"th",9),t.YNc(25,tt,2,1,"td",10),t.BQk(),t.ynx(26,13),t.YNc(27,et,2,0,"th",9),t.YNc(28,ot,2,1,"td",10),t.BQk(),t.ynx(29,14),t.YNc(30,it,2,0,"th",9),t.YNc(31,nt,2,1,"td",10),t.BQk(),t.ynx(32,15),t.YNc(33,at,2,0,"th",9),t.YNc(34,rt,2,1,"td",10),t.BQk(),t.ynx(35,16),t.YNc(36,lt,2,0,"th",9),t.YNc(37,st,2,1,"td",10),t.BQk(),t.ynx(38,17),t.YNc(39,ct,2,0,"th",9),t.YNc(40,dt,7,0,"td",10),t.BQk(),t.YNc(41,ut,1,0,"tr",18),t.YNc(42,mt,1,0,"tr",19),t.qZA(),t._UZ(43,"br")(44,"mat-paginator",20),t.qZA()()}2&e&&(t.xp6(16),t.Q6J("dataSource",i.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",i.displayColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(4,pt)))},dependencies:[p.lW,p.RK,Z.a8,Z.dn,Z.dk,R.d,C.Hw,T.Nt,f.KE,f.hX,b.NW,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,u.xw,u.SQ,u.Wh,u.yH],styles:[".alinear[_ngcontent-%COMP%]{text-align:center;margin-top:20px}"]}),o})();const E=U_BASE_URL;let _t=(()=>{class o{constructor(e){this.http=e}listRoles(){return this.http.get(`${E}/Roles`)}getRolById(e){return this.http.get(`${E}/Rol/id/${e}`)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(v.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var x=m(6895),w=m(3238),gt=m(6709),B=m(4385);function ht(o,n){if(1&o&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.rol," ")}}let $=(()=>{class o{constructor(e,i,a,l,s){this.fb=e,this.usuarioService=i,this.rolService=a,this.dialogRef=l,this.data=s,this.estadoFormulario="A\xf1adir",this.roles=[],this.usuarioForm=this.fb.group({id:[""],nombre:["",r.kI.required],apellidos:["",r.kI.required],email:["",r.kI.required],telefono:["",r.kI.required],activo:[],bloqueado:[],rol:["",r.kI.required]}),null!=s&&(this.updateForm(s),this.estadoFormulario="Actualizar")}ngOnInit(){this.getRoles()}onSave(){let e,i;e=null===this.usuarioForm.get("activo")?.value?"false":this.usuarioForm.get("activo")?.value,i=null===this.usuarioForm.get("bloqueado")?.value?"false":this.usuarioForm.get("bloqueado")?.value;let a=new FormData;a.append("id",this.usuarioForm.get("id")?.value),a.append("nombre",this.usuarioForm.get("nombre")?.value),a.append("apellidos",this.usuarioForm.get("apellidos")?.value),a.append("email",this.usuarioForm.get("email")?.value),a.append("telefono",this.usuarioForm.get("telefono")?.value),a.append("activo",e),a.append("bloqueado",i),a.append("rol",this.usuarioForm.get("rol")?.value),""!=a.get("id")?this.usuarioService.updateIngrediente(a,a.get("id")).subscribe(l=>{this.dialogRef.close(1)},l=>{this.dialogRef.close(2)}):this.usuarioService.saveUsuario(a).subscribe(l=>{this.dialogRef.close(1)},l=>{this.dialogRef.close(2)})}onCancel(){this.dialogRef.close(3)}updateForm(e){this.usuarioForm=this.fb.group({id:[e.id,r.kI.required],nombre:[e.nombre,r.kI.required],apellidos:[e.apellidos,r.kI.required],email:[e.email,r.kI.required],telefono:[e.telefono,r.kI.required],activo:[e.activo],bloqueado:[e.bloqueado],rol:[e.rol.id,r.kI.nullValidator]})}getRoles(){this.rolService.listRoles().subscribe(e=>{this.roles=e.rolResponse.rol},e=>{})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.qu),t.Y36(k),t.Y36(_t),t.Y36(d.so),t.Y36(d.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-usuario"]],decls:33,vars:4,consts:[["mat-dialog-title",""],[3,"formGroup"],[1,"container"],["matInput","","formControlName","id","hidden",""],["matInput","","placeholder","Nombre","formControlName","nombre","required",""],["matInput","","placeholder","Apellidos","formControlName","apellidos","required",""],["matInput","","placeholder","Email","formControlName","email","required",""],["matInput","","placeholder","Tel\xe9fono","formControlName","telefono","required",""],["fxFlex","","fxLayout","row","fxLayoutAlign","space-around center"],["labelPosition","after","color","primary","formControlName","activo"],["labelPosition","after","color","primary","formControlName","bloqueado"],["formControlName","rol"],[3,"value",4,"ngFor","ngForOf"],["mat-button","","color","primary",3,"disabled","click"],["mat-button","","color","primary",3,"click"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"form",1)(4,"div",2),t._UZ(5,"input",3),t.TgZ(6,"mat-form-field"),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"mat-form-field"),t._UZ(9,"input",5),t.qZA(),t.TgZ(10,"mat-form-field"),t._UZ(11,"input",6),t.qZA(),t.TgZ(12,"mat-form-field"),t._UZ(13,"input",7),t.qZA(),t.TgZ(14,"div",8)(15,"mat-checkbox",9),t._uU(16,"Activo"),t.qZA(),t.TgZ(17,"mat-checkbox",10),t._uU(18,"Bloqueado"),t.qZA()(),t.TgZ(19,"mat-form-field")(20,"mat-label"),t._uU(21,"Rol"),t.qZA(),t.TgZ(22,"mat-select",11),t.YNc(23,ht,2,2,"mat-option",12),t.qZA()()()()(),t.TgZ(24,"mat-dialog-actions")(25,"button",13),t.NdJ("click",function(){return i.onSave()}),t.TgZ(26,"mat-icon"),t._uU(27,"save"),t.qZA(),t._uU(28," Guardar "),t.qZA(),t.TgZ(29,"button",14),t.NdJ("click",function(){return i.onCancel()}),t.TgZ(30,"mat-icon"),t._uU(31,"cancel"),t.qZA(),t._uU(32," Cancel "),t.qZA()()),2&e&&(t.xp6(1),t.hij("",i.estadoFormulario," usuario"),t.xp6(2),t.Q6J("formGroup",i.usuarioForm),t.xp6(20),t.Q6J("ngForOf",i.roles),t.xp6(2),t.Q6J("disabled",i.usuarioForm.invalid))},dependencies:[x.sg,w.ey,p.lW,gt.oG,d.uh,d.xY,d.H8,C.Hw,T.Nt,f.KE,f.hX,B.gD,u.xw,u.Wh,u.yH,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.alinear[_ngcontent-%COMP%]{text-align:center;margin-top:20px}"]}),o})();function Zt(o,n){1&o&&(t.TgZ(0,"th",23),t._uU(1,"N\xba"),t.qZA())}function Ct(o,n){if(1&o&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&o){const e=n.index;t.xp6(1),t.Oqu(e+1)}}function Tt(o,n){1&o&&(t.TgZ(0,"th",23),t._uU(1,"Apellido/s"),t.qZA())}function bt(o,n){if(1&o&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.apellidos)}}function xt(o,n){1&o&&(t.TgZ(0,"th",23),t._uU(1,"Nombre"),t.qZA())}function At(o,n){if(1&o&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.nombre)}}function Ut(o,n){1&o&&(t.TgZ(0,"th",23),t._uU(1,"Email"),t.qZA())}function vt(o,n){if(1&o&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.email)}}function qt(o,n){1&o&&(t.TgZ(0,"th",23),t._uU(1,"Tlf"),t.qZA())}function Nt(o,n){if(1&o&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.telefono)}}function Dt(o,n){1&o&&(t.TgZ(0,"th",23),t._uU(1,"Rol"),t.qZA())}function It(o,n){if(1&o&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.rol.rol)}}function kt(o,n){1&o&&(t.TgZ(0,"th",23),t._uU(1,"Activo"),t.qZA())}function yt(o,n){1&o&&(t.TgZ(0,"p",0),t._uU(1,"Activo"),t.qZA())}function St(o,n){1&o&&(t.TgZ(0,"p",0),t._uU(1,"No Activo"),t.qZA())}function Ft(o,n){if(1&o&&(t.TgZ(0,"td",25),t.YNc(1,yt,2,0,"p",26),t.YNc(2,St,2,0,"p",26),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf",e.activo),t.xp6(1),t.Q6J("ngIf",!e.activo)}}function Pt(o,n){1&o&&(t.TgZ(0,"th",23),t._uU(1,"Bloqueado"),t.qZA())}function Rt(o,n){1&o&&(t.TgZ(0,"p",0),t._uU(1,"Bloqueado"),t.qZA())}function Yt(o,n){1&o&&(t.TgZ(0,"p",0),t._uU(1,"No Bloqueado"),t.qZA())}function wt(o,n){if(1&o&&(t.TgZ(0,"td",25),t.YNc(1,Rt,2,0,"p",26),t.YNc(2,Yt,2,0,"p",26),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf",e.bloqueado),t.xp6(1),t.Q6J("ngIf",!e.bloqueado)}}function Bt(o,n){1&o&&(t.TgZ(0,"th",23),t._uU(1,"Acciones"),t.qZA())}function Ot(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",24)(1,"button",27),t.NdJ("click",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.edit(l))}),t.TgZ(2,"mat-icon",28),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",27),t.NdJ("click",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.delete(l.id))}),t.TgZ(5,"mat-icon",29),t.NdJ("click",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.delete(l.id))}),t._uU(6,"delete"),t.qZA()()()}}function Qt(o,n){1&o&&t._UZ(0,"tr",30)}function Jt(o,n){1&o&&t._UZ(0,"tr",31)}const Et=function(){return[10,20]};let $t=(()=>{class o{constructor(e,i,a){this.usuarioService=e,this.dialog=i,this.snackBar=a,this.displayColumns=["n","apellidos","nombre","email","telefono","rol","activo","bloqueado","acciones"],this.dataSource=new c.by}ngOnInit(){this.listUsuarios()}listUsuarios(){this.usuarioService.listUsuarios().subscribe(e=>{this.processUsuariosResponse(e)},e=>{})}processUsuariosResponse(e){const i=[];"00"==e.metadata[0].code&&(e.usuarioResponse.usuario.forEach(l=>{i.push(l)}),this.dataSource=new c.by(i),this.dataSource.paginator=this.paginator)}openUsuarioDialog(){this.dialog.open($,{width:"500px"}).afterClosed().subscribe(i=>{1==i?(this.openSnackBar("Usuario agregado","Success"),this.listUsuarios()):2==i&&this.openSnackBar("Usuario no agregado","Error")})}buscar(e){if(0===e.length)return this.listUsuarios();this.usuarioService.getUsuarioByEmail(e).subscribe(i=>{this.processUsuariosResponse(i)})}edit(e){this.dialog.open($,{width:"500px",data:e}).afterClosed().subscribe(a=>{1==a?(this.openSnackBar("Usuario actualizado","Success"),this.listUsuarios()):2==a&&this.openSnackBar("Usuario no actualizado","Error")})}delete(e){this.dialog.open(F,{width:"500px",data:{id:e,module:"usuario"}}).afterClosed().subscribe(a=>{1==a?(this.openSnackBar("Usuario eliminado","Success"),this.listUsuarios()):2==a&&this.openSnackBar("Usuario no eliminado","Error")})}openSnackBar(e,i){return this.snackBar.open(e,i,{duration:2e3})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k),t.Y36(d.uw),t.Y36(P.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-usuario"]],viewQuery:function(e,i){if(1&e&&t.Gf(b.NW,5),2&e){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first)}},decls:49,vars:5,consts:[[1,"alinear"],["fxFlex","","fxLayout","row","fxLayoutAlign","flex-end"],["appearance","fill"],["matInput","",3,"keyup"],["input",""],["fxLayout","row","fxLayoutGap","20px","type","none"],["mat-raised-button","","color","primary",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","n"],["mat-header-cell","","class","alinear",4,"matHeaderCellDef"],["mat-cell","","class","alinear",4,"matCellDef"],["matColumnDef","apellidos"],["matColumnDef","nombre"],["matColumnDef","email"],["matColumnDef","telefono"],["matColumnDef","rol"],["matColumnDef","activo"],["mat-cell","",4,"matCellDef"],["matColumnDef","bloqueado"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","showFirstLastButtons"],["mat-header-cell","",1,"alinear"],["mat-cell","",1,"alinear"],["mat-cell",""],["class","alinear",4,"ngIf"],["mat-icon-button","","color","accent",3,"click"],["aria-label","Editar"],["aria-label","Borrar",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"mat-card")(1,"h2",0),t._uU(2,"Listado de Usuarios"),t.qZA(),t.TgZ(3,"mat-card-header")(4,"div",1)(5,"mat-form-field",2)(6,"mat-label"),t._uU(7,"Buscar usuario por email"),t.qZA(),t.TgZ(8,"input",3,4),t.NdJ("keyup",function(){t.CHM(a);const s=t.MAs(9);return t.KtG(i.buscar(s.value))}),t.qZA()(),t.TgZ(10,"ul",5)(11,"li")(12,"button",6),t.NdJ("click",function(){return i.openUsuarioDialog()}),t._uU(13,"A\xf1adir Usuario"),t.qZA()()()()(),t._UZ(14,"mat-divider"),t.TgZ(15,"mat-card-content")(16,"table",7),t.ynx(17,8),t.YNc(18,Zt,2,0,"th",9),t.YNc(19,Ct,2,1,"td",10),t.BQk(),t.ynx(20,11),t.YNc(21,Tt,2,0,"th",9),t.YNc(22,bt,2,1,"td",10),t.BQk(),t.ynx(23,12),t.YNc(24,xt,2,0,"th",9),t.YNc(25,At,2,1,"td",10),t.BQk(),t.ynx(26,13),t.YNc(27,Ut,2,0,"th",9),t.YNc(28,vt,2,1,"td",10),t.BQk(),t.ynx(29,14),t.YNc(30,qt,2,0,"th",9),t.YNc(31,Nt,2,1,"td",10),t.BQk(),t.ynx(32,15),t.YNc(33,Dt,2,0,"th",9),t.YNc(34,It,2,1,"td",10),t.BQk(),t.ynx(35,16),t.YNc(36,kt,2,0,"th",9),t.YNc(37,Ft,3,2,"td",17),t.BQk(),t.ynx(38,18),t.YNc(39,Pt,2,0,"th",9),t.YNc(40,wt,3,2,"td",17),t.BQk(),t.ynx(41,19),t.YNc(42,Bt,2,0,"th",9),t.YNc(43,Ot,7,0,"td",10),t.BQk(),t.YNc(44,Qt,1,0,"tr",20),t.YNc(45,Jt,1,0,"tr",21),t.qZA(),t._UZ(46,"mat-divider")(47,"br")(48,"mat-paginator",22),t.qZA()()}2&e&&(t.xp6(16),t.Q6J("dataSource",i.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",i.displayColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayColumns),t.xp6(3),t.Q6J("pageSizeOptions",t.DdM(4,Et)))},dependencies:[x.O5,p.lW,p.RK,Z.a8,Z.dn,Z.dk,R.d,C.Hw,T.Nt,f.KE,f.hX,b.NW,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,u.xw,u.SQ,u.Wh,u.yH],styles:[".alinear[_ngcontent-%COMP%]{text-align:center;margin-top:20px}"]}),o})();function Gt(o,n){if(1&o&&(t.TgZ(0,"mat-option",17),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.nombre," ")}}function Ht(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",12),t._UZ(1,"mat-divider")(2,"br"),t.TgZ(3,"mat-form-field")(4,"mat-label"),t._uU(5,"Ingrediente"),t.qZA(),t.TgZ(6,"mat-select",13),t.YNc(7,Gt,2,2,"mat-option",14),t.qZA()(),t.TgZ(8,"mat-form-field"),t._UZ(9,"input",15),t.qZA(),t.TgZ(10,"button",16),t.NdJ("click",function(){const l=t.CHM(e).index,s=t.oxw();return t.KtG(s.eliminarIngrediente(l))}),t.TgZ(11,"mat-icon"),t._uU(12,"delete"),t.qZA()()()}if(2&o){const e=n.index,i=t.oxw();t.Q6J("formGroupName",e),t.xp6(7),t.Q6J("ngForOf",i.ingredientes)}}let G=(()=>{class o{constructor(e,i,a,l,s){this.fb=e,this.platoService=i,this.ingredienteService=a,this.dialogRef=l,this.data=s,this.estadoFormulario="A\xf1adir",this.ingredientes=[],this.platoForm=this.fb.group({id:[""],nombre:["",r.kI.required],receta:["",r.kI.required],ingredientesPlatos:this.fb.array([],r.kI.required)}),null!=s&&(this.updateForm(s),this.estadoFormulario="Actualizar")}ngOnInit(){"Actualizar"!==this.estadoFormulario&&this.agregarIngrediente(),this.getIngredientes()}get ingredientesPlatos(){return this.platoForm.get("ingredientesPlatos")}agregarIngrediente(){const e=this.fb.group({ingrediente:["",r.kI.required],cantidad:["",r.kI.required]});this.ingredientesPlatos.push(e)}eliminarIngrediente(e){this.ingredientesPlatos.removeAt(e)}onSave(){let e=this.platoForm.get("ingredientesPlatos"),i=[],a=[];for(let s=0;s<e.length;s++){let g=e.at(s).get("ingrediente")?.value,A=e.at(s).get("cantidad")?.value;i.push(g),a.push(A)}let l=new FormData;l.append("id",this.platoForm.get("id")?.value),l.append("nombre",this.platoForm.get("nombre")?.value),l.append("receta",this.platoForm.get("receta")?.value),l.append("ingredientes",i.join(",")),l.append("cantidades",a.join(",")),""!=l.get("id")?this.platoService.updatePlato(l,l.get("id")).subscribe(s=>{this.dialogRef.close(1)},s=>{this.dialogRef.close(2)}):this.platoService.savePlato(l).subscribe(s=>{console.log(s),this.dialogRef.close(1)},s=>{console.log(l),this.dialogRef.close(2)})}onCancel(){this.dialogRef.close(3)}updateForm(e){const i=e.ingredientes,a=e.cantidades,l=this.platoForm.get("ingredientesPlatos");this.eliminarIngrediente(1);for(let s=0;s<i.length;s++){const g=this.fb.group({ingrediente:[i[s].id],cantidad:[a[s]]});l.push(g)}this.platoForm=this.fb.group({id:[e.id],nombre:[e.nombre,r.kI.required],receta:[e.receta,r.kI.required],ingredientesPlatos:l})}getIngredientes(){this.ingredienteService.listIngredientes().subscribe(e=>{this.ingredientes=e.ingredienteResponse.ingrediente},e=>{})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.qu),t.Y36(y),t.Y36(I),t.Y36(d.so),t.Y36(d.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-plato"]],decls:26,vars:4,consts:[["mat-dialog-title",""],[3,"formGroup"],[1,"container"],["matInput","","formControlName","id","hidden",""],["matInput","","placeholder","Nombre","formControlName","nombre","required",""],["matInput","","placeholder","Receta","formControlName","receta","required",""],["formArrayName","ingredientesPlatos"],["class","container",3,"formGroupName",4,"ngFor","ngForOf"],["fxFlex","","fxLayout","row","fxLayoutAlign","flex-end"],["mat-raised-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"disabled","click"],["mat-button","","color","primary",3,"click"],[1,"container",3,"formGroupName"],["formControlName","ingrediente"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","step","0.1","placeholder","Cantidad(g/ml)","formControlName","cantidad","required",""],["mat-icon-button","","color","warn",3,"click"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"form",1)(4,"div",2),t._UZ(5,"input",3),t.TgZ(6,"mat-form-field"),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"mat-form-field"),t._UZ(9,"input",5),t.qZA(),t.TgZ(10,"div",6),t.YNc(11,Ht,13,2,"div",7),t._UZ(12,"br"),t.qZA()(),t.TgZ(13,"div")(14,"div",8)(15,"button",9),t.NdJ("click",function(){return i.agregarIngrediente()}),t._uU(16,"Agregar ingrediente"),t.qZA()()()()(),t.TgZ(17,"mat-dialog-actions")(18,"button",10),t.NdJ("click",function(){return i.onSave()}),t.TgZ(19,"mat-icon"),t._uU(20,"save"),t.qZA(),t._uU(21," Guardar "),t.qZA(),t.TgZ(22,"button",11),t.NdJ("click",function(){return i.onCancel()}),t.TgZ(23,"mat-icon"),t._uU(24,"cancel"),t.qZA(),t._uU(25," Cancel "),t.qZA()()),2&e&&(t.xp6(1),t.hij("",i.estadoFormulario," plato"),t.xp6(2),t.Q6J("formGroup",i.platoForm),t.xp6(8),t.Q6J("ngForOf",i.ingredientesPlatos.controls),t.xp6(7),t.Q6J("disabled",i.platoForm.invalid))},dependencies:[x.sg,w.ey,p.lW,p.RK,d.uh,d.xY,d.H8,R.d,C.Hw,T.Nt,f.KE,f.hX,B.gD,u.xw,u.Wh,u.yH,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.sg,r.u,r.x0,r.CE],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.alinear[_ngcontent-%COMP%]{text-align:center;margin-top:20px}"]}),o})();function Lt(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1,"N\xba"),t.qZA())}function Mt(o,n){if(1&o&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&o){const e=n.index;t.xp6(1),t.Oqu(e+1)}}function jt(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1,"Nombre"),t.qZA())}function zt(o,n){if(1&o&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.nombre)}}function Kt(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1,"Receta"),t.qZA())}function Wt(o,n){if(1&o&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.receta)}}function Xt(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1,"Ingredientes"),t.qZA())}function Vt(o,n){if(1&o&&(t.TgZ(0,"p",0),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.nombre)}}function te(o,n){if(1&o&&(t.TgZ(0,"td",20),t.YNc(1,Vt,2,1,"p",21),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Q6J("ngForOf",e.ingredientes)}}function ee(o,n){1&o&&(t.TgZ(0,"th",18),t._uU(1,"Acciones"),t.qZA())}function oe(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",19)(1,"button",22),t.NdJ("click",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.edit(l))}),t.TgZ(2,"mat-icon",23),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",22),t.NdJ("click",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.delete(l.id))}),t.TgZ(5,"mat-icon",24),t._uU(6,"delete"),t.qZA()()()}}function ie(o,n){1&o&&t._UZ(0,"tr",25)}function ne(o,n){1&o&&t._UZ(0,"tr",26)}let ae=(()=>{class o{constructor(e,i,a){this.platoService=e,this.dialog=i,this.snackBar=a,this.displayColumns=["n","nombre","receta","ingredientes","acciones"],this.dataSource=new c.by}ngOnInit(){this.listPlatos()}listPlatos(){this.platoService.listPlatos().subscribe(e=>{this.processPlatoResponse(e)},e=>{})}processPlatoResponse(e){const i=[];"00"==e.metadata[0].code&&(e.platoResponse.platos.forEach(l=>{i.push(l)}),this.dataSource=new c.by(i),this.dataSource.paginator=this.paginator)}openPlatoDialog(){this.dialog.open(G,{width:"500px"}).afterClosed().subscribe(i=>{1==i?(this.openSnackBar("Plato agregado","Success"),this.listPlatos()):2==i&&this.openSnackBar("Plato no agregado","Error")})}edit(e){this.dialog.open(G,{width:"500px",data:e}).afterClosed().subscribe(a=>{1==a?(this.openSnackBar("Usuario actualizado","Success"),this.listPlatos()):2==a&&this.openSnackBar("Usuario no actualizado","Error")})}delete(e){this.dialog.open(F,{data:{id:e,module:"plato"}}).afterClosed().subscribe(a=>{1==a?(this.openSnackBar("Plato eliminado","Success"),this.listPlatos()):2==a&&this.openSnackBar("Plato no eliminado","Error")})}buscar(e){if(0===e.length)return this.listPlatos();this.platoService.getPlatoByNombre(e).subscribe(i=>{this.processPlatoResponse(i)})}openSnackBar(e,i){return this.snackBar.open(e,i,{duration:2e3})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y),t.Y36(d.uw),t.Y36(P.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-plato"]],viewQuery:function(e,i){if(1&e&&t.Gf(b.NW,5),2&e){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first)}},decls:33,vars:3,consts:[[1,"alinear"],["fxFlex","","fxLayout","row","fxLayoutAlign","flex-end"],["appearance","fill"],["matInput","",3,"keyup"],["input",""],["fxLayout","row","fxLayoutGap","20px","type","none"],["mat-raised-button","","color","primary",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","n"],["mat-header-cell","","class","alinear",4,"matHeaderCellDef"],["mat-cell","","class","alinear",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","receta"],["matColumnDef","ingredientes"],["mat-cell","",4,"matCellDef"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"alinear"],["mat-cell","",1,"alinear"],["mat-cell",""],["class","alinear",4,"ngFor","ngForOf"],["mat-icon-button","","color","accent",3,"click"],["aria-label","Editar"],["aria-label","Borrar"],["mat-header-row",""],["mat-row",""]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"mat-card")(1,"h2",0),t._uU(2,"Listado de Platos"),t.qZA(),t.TgZ(3,"mat-card-header")(4,"div",1)(5,"mat-form-field",2)(6,"mat-label"),t._uU(7,"Buscar plato"),t.qZA(),t.TgZ(8,"input",3,4),t.NdJ("keyup",function(){t.CHM(a);const s=t.MAs(9);return t.KtG(i.buscar(s.value))}),t.qZA()(),t.TgZ(10,"ul",5)(11,"li")(12,"button",6),t.NdJ("click",function(){return i.openPlatoDialog()}),t._uU(13,"A\xf1adir Plato"),t.qZA()()()()(),t.TgZ(14,"mat-card-content")(15,"table",7),t.ynx(16,8),t.YNc(17,Lt,2,0,"th",9),t.YNc(18,Mt,2,1,"td",10),t.BQk(),t.ynx(19,11),t.YNc(20,jt,2,0,"th",9),t.YNc(21,zt,2,1,"td",10),t.BQk(),t.ynx(22,12),t.YNc(23,Kt,2,0,"th",9),t.YNc(24,Wt,2,1,"td",10),t.BQk(),t.ynx(25,13),t.YNc(26,Xt,2,0,"th",9),t.YNc(27,te,2,1,"td",14),t.BQk(),t.ynx(28,15),t.YNc(29,ee,2,0,"th",9),t.YNc(30,oe,7,0,"td",10),t.BQk(),t.YNc(31,ie,1,0,"tr",16),t.YNc(32,ne,1,0,"tr",17),t.qZA()()()}2&e&&(t.xp6(15),t.Q6J("dataSource",i.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",i.displayColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayColumns))},dependencies:[x.sg,p.lW,p.RK,Z.a8,Z.dn,Z.dk,C.Hw,T.Nt,f.KE,f.hX,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,u.xw,u.SQ,u.Wh,u.yH],styles:[".alinear[_ngcontent-%COMP%]{text-align:center;margin-top:20px}"]}),o})();function re(o,n){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.nombre+" "+e.apellidos," ")}}function le(o,n){1&o&&t.YNc(0,re,2,2,"mat-option",13),2&o&&t.Q6J("ngIf","Nutricionista"===n.$implicit.rol.rol)}function se(o,n){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.nombre+" "+e.apellidos," ")}}function ce(o,n){1&o&&t.YNc(0,se,2,2,"mat-option",13),2&o&&t.Q6J("ngIf","Paciente"===n.$implicit.rol.rol)}function de(o,n){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",n.index),t.xp6(1),t.hij(" ",e," ")}}function ue(o,n){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.nombre," ")}}function me(o,n){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.nombre," ")}}function pe(o,n){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.nombre," ")}}function fe(o,n){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.nombre," ")}}function _e(o,n){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.nombre," ")}}function ge(o,n){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.nombre," ")}}function he(o,n){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.nombre," ")}}function Ze(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",15),t._UZ(1,"mat-divider")(2,"br"),t.TgZ(3,"mat-form-field")(4,"mat-label"),t._uU(5,"Momento del dia"),t.qZA(),t.TgZ(6,"mat-select",16),t.YNc(7,de,2,2,"mat-option",17),t.qZA()(),t.TgZ(8,"mat-form-field")(9,"mat-label"),t._uU(10),t.qZA(),t.TgZ(11,"mat-select",18),t.YNc(12,ue,2,2,"mat-option",17),t.qZA()(),t.TgZ(13,"mat-form-field")(14,"mat-label"),t._uU(15),t.qZA(),t.TgZ(16,"mat-select",19),t.YNc(17,me,2,2,"mat-option",17),t.qZA()(),t.TgZ(18,"mat-form-field")(19,"mat-label"),t._uU(20),t.qZA(),t.TgZ(21,"mat-select",20),t.YNc(22,pe,2,2,"mat-option",17),t.qZA()(),t.TgZ(23,"mat-form-field")(24,"mat-label"),t._uU(25),t.qZA(),t.TgZ(26,"mat-select",21),t.YNc(27,fe,2,2,"mat-option",17),t.qZA()(),t.TgZ(28,"mat-form-field")(29,"mat-label"),t._uU(30),t.qZA(),t.TgZ(31,"mat-select",22),t.YNc(32,_e,2,2,"mat-option",17),t.qZA()(),t.TgZ(33,"mat-form-field")(34,"mat-label"),t._uU(35),t.qZA(),t.TgZ(36,"mat-select",23),t.YNc(37,ge,2,2,"mat-option",17),t.qZA()(),t.TgZ(38,"mat-form-field")(39,"mat-label"),t._uU(40),t.qZA(),t.TgZ(41,"mat-select",24),t.YNc(42,he,2,2,"mat-option",17),t.qZA()(),t.TgZ(43,"button",25),t.NdJ("click",function(){const l=t.CHM(e).index,s=t.oxw();return t.KtG(s.eliminarPlatos(l))}),t.TgZ(44,"mat-icon"),t._uU(45,"delete"),t.qZA()()()}if(2&o){const e=n.index,i=t.oxw();t.Q6J("formGroupName",e),t.xp6(7),t.Q6J("ngForOf",i.momentosDia),t.xp6(3),t.hij("Plato ",i.diasSemana[0],""),t.xp6(2),t.Q6J("ngForOf",i.platos),t.xp6(3),t.hij("Plato ",i.diasSemana[1],""),t.xp6(2),t.Q6J("ngForOf",i.platos),t.xp6(3),t.hij("Plato ",i.diasSemana[2],""),t.xp6(2),t.Q6J("ngForOf",i.platos),t.xp6(3),t.hij("Plato ",i.diasSemana[3],""),t.xp6(2),t.Q6J("ngForOf",i.platos),t.xp6(3),t.hij("Plato ",i.diasSemana[4],""),t.xp6(2),t.Q6J("ngForOf",i.platos),t.xp6(3),t.hij("Plato ",i.diasSemana[5],""),t.xp6(2),t.Q6J("ngForOf",i.platos),t.xp6(3),t.hij("Plato ",i.diasSemana[6],""),t.xp6(2),t.Q6J("ngForOf",i.platos)}}let H=(()=>{class o{constructor(e,i,a,l,s,g){this.fb=e,this.dietaService=i,this.platoService=a,this.usuarioService=l,this.dialogRef=s,this.data=g,this.estadoFormulario="A\xf1adir",this.usuarios=[],this.platos=[],this.momentosDia=["Desayuno","Almuerzo","Comida","Merienda","Cena"],this.diasSemana=["Lunes","Martes","Miercoles","Jueves","Viernes","S\xe1bado","Domingo"],this.dietaForm=this.fb.group({id:[""],nutricionista:["",r.kI.required],paciente:["",r.kI.required],platosDietas:this.fb.array([],r.kI.required)}),null!=g&&(this.updateForm(g),this.estadoFormulario="Actualizar")}ngOnInit(){"Actualizar"!==this.estadoFormulario&&this.agregarPlatos(),this.getUsuarios(),this.getPlatos()}get platosDietas(){return this.dietaForm.get("platosDietas")}agregarPlatos(){const e=this.fb.group({momentoDia:["",r.kI.required],plato0:["",r.kI.required],plato1:["",r.kI.required],plato2:["",r.kI.required],plato3:["",r.kI.required],plato4:["",r.kI.required],plato5:["",r.kI.required],plato6:["",r.kI.required]});this.platosDietas.push(e)}eliminarPlatos(e){this.platosDietas.removeAt(e)}onSave(){let e=this.dietaForm.get("platosDietas"),i=[],a=[],l=[],s=[],g=[],A=[],L=[],M=[];for(let h=0;h<e.length;h++){let ye=e.at(h).get("momentoDia")?.value,Se=e.at(h).get("plato0")?.value,Fe=e.at(h).get("plato1")?.value,Pe=e.at(h).get("plato2")?.value,Re=e.at(h).get("plato3")?.value,Ye=e.at(h).get("plato4")?.value,we=e.at(h).get("plato5")?.value,Be=e.at(h).get("plato6")?.value;M.push(ye),i.push(Se),a.push(Fe),l.push(Pe),s.push(Re),g.push(Ye),A.push(we),L.push(Be)}let _=new FormData;_.append("id",this.dietaForm.get("id")?.value),_.append("nutricionista",this.dietaForm.get("nutricionista")?.value),_.append("paciente",this.dietaForm.get("paciente")?.value),_.append("momentosDia",M.join(",")),_.append("platos0",i.join(",")),_.append("platos1",a.join(",")),_.append("platos2",l.join(",")),_.append("platos3",s.join(",")),_.append("platos4",g.join(",")),_.append("platos5",A.join(",")),_.append("platos6",L.join(",")),""!=_.get("id")?this.dietaService.updateDieta(_,_.get("id")).subscribe(h=>{this.dialogRef.close(1)},h=>{this.dialogRef.close(2)}):this.dietaService.saveDieta(_).subscribe(h=>{this.dialogRef.close(1)},h=>{this.dialogRef.close(2)})}onCancel(){this.dialogRef.close(3)}updateForm(e){const i=e.platos,a=e.momentosDia,l=this.dietaForm.get("platosDietas");this.eliminarPlatos(1);for(let s=0;s<a.length;s+=7){const A=this.fb.group({momentoDia:[this.momentosDia.indexOf(a[s])],plato0:[i[s].id],plato1:[i[s+1].id],plato2:[i[s+2].id],plato3:[i[s+3].id],plato4:[i[s+4].id],plato5:[i[s+5].id],plato6:[i[s+6].id]});l.push(A)}this.dietaForm=this.fb.group({id:[e.id],nutricionista:[e.nutricionista.id],paciente:[e.paciente.id],platosDietas:l})}getPlatos(){this.platoService.listPlatos().subscribe(e=>{this.platos=e.platoResponse.platos})}getUsuarios(){this.usuarioService.listUsuarios().subscribe(e=>{this.usuarios=e.usuarioResponse.usuario},e=>{})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.qu),t.Y36(Y),t.Y36(y),t.Y36(k),t.Y36(d.so),t.Y36(d.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-dieta"]],decls:32,vars:6,consts:[["mat-dialog-title","",1,"alinear"],[3,"formGroup"],["matInput","","formControlName","id","hidden",""],["fxFlex","","fxLayout","row","fxLayoutAlign","space-evenly center"],["formControlName","nutricionista"],["ngFor","",3,"ngForOf"],["formControlName","paciente"],["formArrayName","platosDietas"],["class","container",3,"formGroupName",4,"ngFor","ngForOf"],["fxFlex","","fxLayout","row","fxLayoutAlign","flex-end"],["mat-raised-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"disabled","click"],["mat-button","","color","primary",3,"click"],[3,"value",4,"ngIf"],[3,"value"],[1,"container",3,"formGroupName"],["formControlName","momentoDia"],[3,"value",4,"ngFor","ngForOf"],["formControlName","plato0"],["formControlName","plato1"],["formControlName","plato2"],["formControlName","plato3"],["formControlName","plato4"],["formControlName","plato5"],["formControlName","plato6"],["mat-icon-button","","color","warn",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"form",1),t._UZ(4,"input",2),t.TgZ(5,"div")(6,"div",3)(7,"mat-form-field")(8,"mat-label"),t._uU(9,"Nutricionista"),t.qZA(),t.TgZ(10,"mat-select",4),t.YNc(11,le,1,1,"ng-template",5),t.qZA()(),t.TgZ(12,"mat-form-field")(13,"mat-label"),t._uU(14,"Paciente"),t.qZA(),t.TgZ(15,"mat-select",6),t.YNc(16,ce,1,1,"ng-template",5),t.qZA()()()(),t.TgZ(17,"div",7),t.YNc(18,Ze,46,16,"div",8),t.qZA(),t.TgZ(19,"div")(20,"div",9)(21,"button",10),t.NdJ("click",function(){return i.agregarPlatos()}),t._uU(22,"Agregar ingrediente"),t.qZA()()()()(),t.TgZ(23,"mat-dialog-actions")(24,"button",11),t.NdJ("click",function(){return i.onSave()}),t.TgZ(25,"mat-icon"),t._uU(26,"save"),t.qZA(),t._uU(27," Guardar "),t.qZA(),t.TgZ(28,"button",12),t.NdJ("click",function(){return i.onCancel()}),t.TgZ(29,"mat-icon"),t._uU(30,"cancel"),t.qZA(),t._uU(31," Cancel "),t.qZA()()),2&e&&(t.xp6(1),t.hij("",i.estadoFormulario," dieta"),t.xp6(2),t.Q6J("formGroup",i.dietaForm),t.xp6(8),t.Q6J("ngForOf",i.usuarios),t.xp6(5),t.Q6J("ngForOf",i.usuarios),t.xp6(2),t.Q6J("ngForOf",i.platosDietas.controls),t.xp6(6),t.Q6J("disabled",i.dietaForm.invalid))},dependencies:[x.sg,x.O5,w.ey,p.lW,p.RK,d.uh,d.xY,d.H8,R.d,C.Hw,T.Nt,f.KE,f.hX,B.gD,u.xw,u.Wh,u.yH,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,r.x0,r.CE],styles:[".alinear[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}"]}),o})();function Ce(o,n){1&o&&(t.TgZ(0,"th",16),t._uU(1,"N\xba"),t.qZA())}function Te(o,n){if(1&o&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&o){const e=n.index;t.xp6(1),t.Oqu(e+1)}}function be(o,n){1&o&&(t.TgZ(0,"th",16),t._uU(1,"Nutricionista"),t.qZA())}function xe(o,n){if(1&o&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.nutricionista.apellidos+" "+e.nutricionista.nombre)}}function Ae(o,n){1&o&&(t.TgZ(0,"th",16),t._uU(1,"Paciente"),t.qZA())}function Ue(o,n){if(1&o&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.paciente.apellidos+" "+e.paciente.nombre)}}function ve(o,n){1&o&&(t.TgZ(0,"th",16),t._uU(1,"Acciones"),t.qZA())}function qe(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",17)(1,"button",18),t.NdJ("click",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.edit(l))}),t.TgZ(2,"mat-icon",19),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",18),t.NdJ("click",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.delete(l.id))}),t.TgZ(5,"mat-icon",20),t._uU(6,"delete"),t.qZA()()()}}function Ne(o,n){1&o&&t._UZ(0,"tr",21)}function De(o,n){1&o&&t._UZ(0,"tr",22)}const Ie=[{path:"",component:Q},{path:"home",component:Q},{path:"ingredientes",component:ft},{path:"usuarios",component:$t},{path:"platos",component:ae},{path:"dietas",component:(()=>{class o{constructor(e,i,a){this.dietaService=e,this.dialog=i,this.snackBar=a,this.displayColumns=["n","nutricionista","paciente","acciones"],this.dataSource=new c.by}ngOnInit(){this.listDietas()}listDietas(){this.dietaService.listDietas().subscribe(e=>{this.processDietaResponde(e)},e=>{})}processDietaResponde(e){const i=[];"00"==e.metadata[0].code&&(e.dietaResponse.dietas.forEach(l=>{i.push(l)}),this.dataSource=new c.by(i),this.dataSource.paginator=this.paginator)}openDietaDialog(){this.dialog.open(H,{width:"500px"}).afterClosed().subscribe(i=>{1==i?(this.openSnackBar("Dieta agregada","Success"),this.listDietas()):2==i&&this.openSnackBar("Dieta no agregada","Error")})}edit(e){this.dialog.open(H,{width:"500px",data:e}).afterClosed().subscribe(a=>{1==a?(this.openSnackBar("Usuario actualizado","Success"),this.listDietas()):2==a&&this.openSnackBar("Usuario no actualizado","Error")})}delete(e){this.dialog.open(F,{data:{id:e,module:"dieta"}}).afterClosed().subscribe(a=>{1==a?(this.openSnackBar("Dieta eliminada","Success"),this.listDietas()):2==a&&this.openSnackBar("Dieta no eliminada","Error")})}openSnackBar(e,i){return this.snackBar.open(e,i,{duration:2e3})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Y),t.Y36(d.uw),t.Y36(P.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-dieta"]],viewQuery:function(e,i){if(1&e&&t.Gf(b.NW,5),2&e){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first)}},decls:30,vars:3,consts:[[1,"alinear"],["fxFlex","","fxLayout","row","fxLayoutAlign","flex-end"],["appearance","fill"],["matInput",""],["input",""],["fxLayout","row","fxLayoutGap","20px","type","none"],["mat-raised-button","","color","primary",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","n"],["mat-header-cell","","class","alinear",4,"matHeaderCellDef"],["mat-cell","","class","alinear",4,"matCellDef"],["matColumnDef","nutricionista"],["matColumnDef","paciente"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"alinear"],["mat-cell","",1,"alinear"],["mat-icon-button","","color","accent",3,"click"],["aria-label","Editar"],["aria-label","Borrar"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card")(1,"h2",0),t._uU(2,"Listado de Dietas"),t.qZA(),t.TgZ(3,"mat-card-header")(4,"div",1)(5,"mat-form-field",2)(6,"mat-label"),t._uU(7,"Buscar dieta"),t.qZA(),t._UZ(8,"input",3,4),t.qZA(),t.TgZ(10,"ul",5)(11,"li")(12,"button",6),t.NdJ("click",function(){return i.openDietaDialog()}),t._uU(13,"A\xf1adir Dieta"),t.qZA()()()()(),t.TgZ(14,"mat-card-content")(15,"table",7),t.ynx(16,8),t.YNc(17,Ce,2,0,"th",9),t.YNc(18,Te,2,1,"td",10),t.BQk(),t.ynx(19,11),t.YNc(20,be,2,0,"th",9),t.YNc(21,xe,2,1,"td",10),t.BQk(),t.ynx(22,12),t.YNc(23,Ae,2,0,"th",9),t.YNc(24,Ue,2,1,"td",10),t.BQk(),t.ynx(25,13),t.YNc(26,ve,2,0,"th",9),t.YNc(27,qe,7,0,"td",10),t.BQk(),t.YNc(28,Ne,1,0,"tr",14),t.YNc(29,De,1,0,"tr",15),t.qZA()()()),2&e&&(t.xp6(15),t.Q6J("dataSource",i.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",i.displayColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayColumns))},dependencies:[p.lW,p.RK,Z.a8,Z.dn,Z.dk,C.Hw,T.Nt,f.KE,f.hX,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,u.xw,u.SQ,u.Wh,u.yH],styles:[".alinear[_ngcontent-%COMP%]{text-align:center;margin-top:20px}"]}),o})()}];let ke=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[j.Bz.forChild(Ie)]}),o})()}}]);